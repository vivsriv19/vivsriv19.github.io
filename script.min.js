!function(){function e(e,t){return t?document.getElementById(e).querySelector(t):document.getElementById(e)}function t(e,t,n,r,o){var l=document.getElementById(e).querySelector(n).querySelector("."+t);if(r||(r=o.getAttribute("data-token").substring(0,7)),l){var a=(r=l.getAttribute("data-token")+" "+r).match(new RegExp(" ","g")),i=1*(a&&a.length)+1;l.setAttribute("data-token",r),l.innerHTML="<span>"+i+"</span>"}else document.getElementById(e).querySelector(n).insertAdjacentHTML("beforeend",'<span data-token="'+r+'" class="'+t+'"></span>')}function n(e){var t=e.getAttribute("data-token"),n=t.match(new RegExp(" ","g"));if((n&&n.length)>0){e.setAttribute("data-token",t.slice(8));var r=1*e.querySelector("span").innerText-1;e.querySelector("span").innerText=r<=1?"":r}else e.remove()}function r(r){var i=r.target||r;o.innerText="";var u=a.turn,s="#"+u+"-start",c=u+"-token",d=i.getAttribute("data-token").substring(0,7);if(6==a.num&&i.closest(s))!function(e){var n,r,o=e.target.getAttribute("data-token");n=e.target,r=a.turn+"-token",n.classList.remove(r),t(l[a.turn][a.zone[a.turn][o].index],a.turn+"-token",".cell-0",e.target.getAttribute("data-token")),a[a.turn][o]="cell-0"}(r);else if(!i.closest(s)&&i.classList.contains(c)){var g=a[u][d]&&1*a[u][d].replace("cell-",""),m=g+a.num;if(4==a.zone[u][d].index&&1==a.zone[u][d].reset&&m>11)return g<13&&(m+=1),18==m?(a.zone[u][d].home=1,e("home").querySelector("#"+u+"-home").innerText=a.zone[u]["token-1"].home+a.zone[u]["token-2"].home+a.zone[u]["token-3"].home+a.zone[u]["token-4"].home,n(i)):m<18?(t(l[u][a.zone[u][d].index],c,".cell-"+m,null,i),n(i)):m=g,void(a[u][d]="cell-"+m);m>4&&m<=12?0==a.zone[u][d].reset&&(a.zone[u][d].reset=1,a.zone[u][d].index++):m>12&&((m=m-12-1)>4?(a.zone[u][d].index++,a.zone[u][d].reset=1):a.zone[u][d].reset=0),t(l[u][a.zone[u][d].index],c,".cell-"+m,null,i),n(i),a[u][d]="cell-"+m}}var o=e("diceNum"),l={red:["red","green","yellow","blue","red"],green:["green","yellow","blue","red","green"],blue:["blue","red","green","yellow","blue"],yellow:["yellow","blue","red","green","yellow"]},a={turn:"red",red:{"token-1":!1,"token-2":!1,"token-3":!1,"token-4":!1},zone:{red:{"token-1":{index:0,reset:0,home:0},"token-2":{index:0,reset:0,home:0},"token-3":{index:0,reset:0,home:0},"token-4":{index:0,reset:0,home:0}}},num:0};document.getElementById("container").addEventListener("click",function(e){e.target.classList.contains(a.turn+"-token")?(r(e),a.num=0):e.target.parentNode&&e.target.parentNode.classList.contains(a.turn+"-token")&&(r(e.target.parentNode),a.num=0)}),e("right").addEventListener("click",function(e){"diceClick"==e.target.classList.value&&(a.num=1*e.target.innerText,o.innerText=" : "+a.num)}),window.appState=a}();